Pick Adjust Node
==============================

The purpose of the Pick Adjust Node is to alter the poses generated by the Box Volume Estimation Node. These boxes may be picked up by a rectangular vacuum picking plate, which may be significantly larger than the box itself. We want to ensure that the plate can safely pick up the box without interfering with any other boxes nearby (which would be the case in a depalletization scenario). 

There are two modes for this node: Single-Box picking and Multiple-Box picking. Single-Box is as it sounds - a single new pose will be generated for each existing box. This pose will be translated such that one corner of the plate is flush with one corner of the box, and that no other boxes are covered by the plate.  Multiple-Box picking will generate poses as to minimize the total number of poses generated - i.e., each pose will try and safely cover as many boxes as possible. The user can specify the dimensions of the picking plate, in mm.

.. image:: ../../_static/images/3d_process/pick_adjust.PNG
   :width: 100%

Input
--------------------------------

* Dimensions: a vector of box dimensions from the output of box volume estimation node
* Original Poses: a vector of poses representing the pick pose of each box
* Pose Order (optional): a vector representing the order of the orignal poses from the pick sort node

Output
--------------------------------

* newPoses: valid poses where the vaccum could suck up the orignal box

Parameters
------------------------------------

* Plate X: width of the picking plate, default is 300mm
* Plate Y: height of the picking plate, default is 300mm
* Threshold low: how much of the box should be covered to be picked up, default is 0.5
* Threshold high: the upper bound of box coverage to be picked up, default is 1
* Pre Sort Poses: sort poses in a back-and-force moving pattern

Example Usage (vedio required)
------------------------------

